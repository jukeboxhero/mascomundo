try{"undefined"===typeof WeakMap&&function(){var l=Object.defineProperty,w=Date.now()%1E9,x=function(){this.name="__st"+(1E9*Math.random()>>>0)+(w++ +"__")};x.prototype={set:function(a,k){var g=a[this.name];g&&g[0]===a?g[1]=k:l(a,this.name,{value:[a,k],writable:!0})},get:function(a){var k;return(k=a[this.name])&&k[0]===a?k[1]:void 0}};window.WeakMap=x}()}catch(e$$12){};try{(function(l){function w(){p=!1;var a=n;n=[];a.sort(function(a,c){return a.uid_-c.uid_});var c=!1;a.forEach(function(a){var b=a.takeRecords();x(a);b.length&&(a.callback_(b,a),c=!0)});c&&w()}function x(a){a.nodes_.forEach(function(c){(c=e.get(c))&&c.forEach(function(c){c.observer===a&&c.removeTransientObservers()})})}function a(a,c){for(var b=a;b;b=b.parentNode){var h=e.get(b);if(h)for(var d=0;d<h.length;d++){var m=h[d],f=m.options;(b===a||f.subtree)&&(f=c(f))&&m.enqueue(f)}}}function k(a){this.callback_=
a;this.nodes_=[];this.records_=[];this.uid_=++t}function g(a,c){this.type=a;this.target=c;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function f(a,c){return r=new g(a,c)}function d(a){if(u)return u;var c=r,b=new g(c.type,c.target);b.addedNodes=c.addedNodes.slice();b.removedNodes=c.removedNodes.slice();b.previousSibling=c.previousSibling;b.nextSibling=c.nextSibling;b.attributeName=c.attributeName;b.attributeNamespace=
c.attributeNamespace;b.oldValue=c.oldValue;u=b;u.oldValue=a;return u}function b(a,c,b){this.observer=a;this.target=c;this.options=b;this.transientObservedNodes=[]}var e=new WeakMap,c=window.msSetImmediate;if(!c){var h=[],m=String(Math.random());window.addEventListener("message",function(a){a.data===m&&(a=h,h=[],a.forEach(function(a){a()}))});c=function(a){h.push(a);window.postMessage(m,"*")}}var p=!1,n=[],t=0;k.prototype={observe:function(a,c){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||
a;if(!c.childList&&!c.attributes&&!c.characterData||c.attributeOldValue&&!c.attributes||c.attributeFilter&&c.attributeFilter.length&&!c.attributes||c.characterDataOldValue&&!c.characterData)throw new SyntaxError;var h=e.get(a);h||e.set(a,h=[]);for(var d,m=0;m<h.length;m++)if(h[m].observer===this){d=h[m];d.removeListeners();d.options=c;break}d||(d=new b(this,a,c),h.push(d),this.nodes_.push(a));d.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=e.get(a);for(var c=0;c<a.length;c++){var b=
a[c];if(b.observer===this){b.removeListeners();a.splice(c,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r,u;b.prototype={enqueue:function(a){var b=this.observer.records_,e=b.length;if(0<b.length){var h=b[e-1];h=h===a?h:!u||h!==u&&h!==r?null:u;if(h){b[e-1]=h;return}}else n.push(this.observer),p||(p=!0,c(w));b[e]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var c=this.options;c.attributes&&a.addEventListener("DOMAttrModified",
this,!0);c.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);c.childList&&a.addEventListener("DOMNodeInserted",this,!0);(c.childList||c.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var c=this.options;c.attributes&&a.removeEventListener("DOMAttrModified",this,!0);c.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);c.childList&&a.removeEventListener("DOMNodeInserted",
this,!0);(c.childList||c.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var c=e.get(a);c||e.set(a,c=[]);c.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=e.get(a);for(var c=0;c<a.length;c++)if(a[c]===this){a.splice(c,1);break}},this)},handleEvent:function(c){switch(c.type){case "DOMAttrModified":var b=
c.attrName,e=c.relatedNode.namespaceURI,h=c.target,m=new f("attributes",h);m.attributeName=b;m.attributeNamespace=e;var p=c.attrChange===MutationEvent.ADDITION?null:c.prevValue;a(h,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(b)||-1!==a.attributeFilter.indexOf(e)))return a.attributeOldValue?d(p):m});break;case "DOMCharacterDataModified":h=c.target;m=f("characterData",h);p=c.prevValue;a(h,function(a){if(a.characterData)return a.characterDataOldValue?
d(p):m});break;case "DOMNodeRemoved":this.addTransientObserver(c.target);case "DOMNodeInserted":var h=c.relatedNode,n=c.target,t;"DOMNodeInserted"===c.type?(c=[n],t=[]):(c=[],t=[n]);var g=n.previousSibling,n=n.nextSibling,m=f("childList",h);m.addedNodes=c;m.removedNodes=t;m.previousSibling=g;m.nextSibling=n;a(h,function(a){if(a.childList)return m})}r=u=void 0}};l.JsMutationObserver=k;!l.MutationObserver&&l.WebKitMutationObserver&&(l.MutationObserver=l.WebKitMutationObserver);l.MutationObserver||(l.MutationObserver=
k)})(this)}catch(e$$15){};(function(){var l;(function(a){a._fs_debug=function(){return!!window._fs_ext_debug||!!window._fs_debug};a._fs_host=function(){return window._fs_ext_host||window._fs_host};a._fs_org=function(){return window._fs_ext_org||window._fs_org};a._fs_ready=function(){return window._fs_ready};a._fs_run_in_iframe=function(){return!!window._fs_run_in_iframe};a._fs_is_outer_script=function(){return!!window._fs_is_outer_script};a._fs_hash=function(){return window._fs_hash};a._fs_replay_flags=function(){return window._fs_replay_flags};
a._fs_transport=function(){return window._fs_transport};a.set_fs_shutdown=function(a){window._fs_shutdown=a}})(l||(l={}));(function(a){function k(a,e){var d=0;try{b.stringify(a,function(a,c){if(d++>e)throw"break";return"object"!=typeof c?void 0:c})}catch(f){if("break"!=f)return!0}return!1}function g(a,h,d,p){if(1>h)return 0;var n;a&&a.constructor==Date?n=isNaN(a)?"Invalid Date":a.toUTCString():(n="object"===typeof Node?a instanceof Node:a&&"object"===typeof a&&0<a.nodeType&&"string"===typeof a.nodeName,
n=n?f(a):void 0===a?"undefined":"object"!=typeof a||null==a?a:void 0);if(void 0!==n){n=b.stringify(n);if(void 0===n)return 0;'"'==n[0]&&(n=e(n,h,'..."'));return n.length<=h?(p.tokens.push(n),n.length):0}if(p.catchCycles){p.opath.splice(d);n=p.opath.lastIndexOf(a);if(-1<n)return a='"'+e("<Cycle to ancestor #"+(d-n-1)+">",h-2)+'"',p.tokens.push(a),a.length;p.opath.push(a)}var t=h,r=function(a){return t>=a.length?(t-=a.length,p.tokens.push(a),!0):!1};n=function(a){","==p.tokens[p.tokens.length-1]?p.tokens[p.tokens.length-
1]=a:r(a)};if(2>t)return 0;if(a instanceof Array){r("[");for(var k=0;k<a.length&&0<t;k++){var s=g(a[k],t-1,d+1,p),t=t-s;if(0==s&&!r("null"))break;r(",")}n("]")}else{r("{");for(var q=Object.keys(a),k=0;k<q.length&&0<t;k++){var s=q[k],l=a[s];if(!r('"'+s+'":'))break;s=g(l,t-1,d+1,p);if(0==s){p.tokens.pop();break}t-=s;r(",")}n("}")}return Infinity==h?1:h-t}function f(a){if(a.tagName){var b=a.tagName.toLowerCase();return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?
' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+b}var d=!1,b;a.$entry=function(a){return a&&a.apply?function(){try{return a.apply(this,arguments)}catch(b){}}:a};a.initDebug=function(){d=a._fs_debug()};a.isDebug=function(){return d};a.logIfDebug=function(a){d&&window.console&&console.log(a)};a.logFSError=function(a){};a.stringify=function(a,e,d){void 0===e&&(e=
Infinity);void 0===d&&(d=!0);try{b||(b=window.JSON);var f={tokens:[],opath:[],catchCycles:d&&k(a,e/4)};g(a,e,0,f);return f.tokens.join("")}catch(n){a="Internal error: unable to determine what JSON error was";try{a=""+n,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(t){}return'"'+a+'"'}};var e=function(a,b,e){void 0===e&&(e="...");return a.length<=b?a:a.length<=e.length||b<=e.length?a.substring(0,b):a.substring(0,b-e.length)+e};a.baseUri=function(a){return"baseURI"in a?a.baseURI:(a=a.getElementsByTagName("base")[0])&&
a.href?a.href:location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return null;var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(a){b||(b=window.JSON);return b.parse(a)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a}})(l||(l={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=
4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=
35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS=
"focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.isUserActionEvent=function(k){switch(k){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};a.MAX_LOGS_PER_PAGE=
1024})(l||(l={}));(function(a){function k(){return window[g]}var g="_fs_loaded",f;a.Namespace=function(){f||(f=k()?k():window._fs_namespace?window._fs_namespace:"FS");return f};a.isLoaded=k;a.setLoaded=function(a){window[g]=a;a in window||(window[a]={})}})(l||(l={}));(function(a){var k=function(){function a(d,b){this.parent=d;this.combinator=b;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!="[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:
"\\"+a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_]/g,b)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&(a+="#"+this.cssEscapeIdent(this.id));var b=
Object.keys(this.classes);b.sort();for(var e=0;e<b.length;e++)a+="."+this.cssEscapeIdent(b[e]);for(var c in this.attrs)a=""==this.attrMatch[c]?a+("["+this.cssEscapeIdent(c)+"]"):a+("["+this.cssEscapeIdent(c)+this.attrMatch[c]+this.cssEscapeString(this.attrs[c])+"]");return a};return a}();a.SelectorRule=k;var g=function(){function a(d){this.rules=d}a.parse=function(d,b){void 0===b&&(b=null);d=d.trim();var e=new k(null,null),c=0,h=!1,m=function(){throw"Invalid selector";},p=function(){q=d[++c];if("\n"==
q||null==q)throw m();if(q.match(/[0-9a-fA-F]/)){var a="";do a+=q,q=d[++c];while(q&&q.match(/[0-9a-fA-F]/));q&&q.match(/[\s]/)&&c++;return String.fromCharCode(parseInt(a,16))}c++;return q},n=function(){for(var a=c,b="",e;null!=(e=d[c]);)if("\\"==e)b+=p();else if(e.match(/[a-zA-Z0-9_\-]/)||128<e.charCodeAt(0))b+=e,c++;else break;if(a==c)throw m();return b},t=function(){for(;null!=d[c]&&d[c].match(/\s/);)c++},g=function(){h=!0;c++;var a=n().toLowerCase();try{var f;t();var g=d[c],k="=";if("*"==g||"|"==
g||"^"==g||"$"==g||"~"==g)k=g+"=",c++;if(b&&!b[k])throw m();if("="!=d[c])throw m();c++;t();f=k}catch(r){if(b&&!b["[]"]||"Invalid selector"!=r)throw r;if("]"!=d[c])throw m();c++;e.attrs[a]=e.attrMatch[a]="";return}q=d[c];'"'==q||"'"==q?(g=q,c++):g="]";for(k="";(q=d[c])!=g;){if(null==q)throw m();if("\\"==q)k+=p();else{if("]"==g&&('"'==q||"'"==q))throw m();k+=q;c++}}c++;"]"!=g&&"]"==d[c]&&c++;e.attrs[a]=k;e.attrMatch[a]=f},u=function(){if(!h)throw m();h=!1;t();var a=d[c];">"==a||"+"==a||"~"==a?(c++,
t()):a=" ";e=new k(e,a);if(b&&!b[a])throw m();};if(0==d.indexOf("//"))throw m();for(var s=0,c=0;c<d.length;){if(s++>2*d.length)throw console.log("Likely caught in an infinite loop while parsing "+d),"Internal error, infinite loop";var q=d[c];switch(q){case "#":h=!0;c++;e.id=n();break;case "*":if(h)throw m();h=!0;e.tag="*";if(b&&!b["*"])throw m();c++;break;case ".":h=!0;c++;e.classes[n()]=!0;break;case "[":g();break;case " ":case ">":case "+":case "~":u();break;case ":":throw m();default:if(h)throw m();
h=!0;e.tag=n().toLowerCase()}}if(!h)throw m();return new a(e)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();a.Selector=g})(l||(l={}));(function(a){function k(a){var e={};if(!a)return e;if(a.classList)for(var c=0;c<a.classList.length;++c)e[a.classList[c]]=!0;else if(a.className)for(a=(null!=a.className.animVal?a.className.animVal:a.className).split(" "),c=0;c<a.length;++c)e[a[c].trim()]=!0;return e}a.NYI_KIND="nyi";
a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var g=function(){function a(b,c){this._parent=b;this._rule=c}a.prototype.parent=function(){return this._parent};a.prototype.matches=function(e,c){if(!e||this._rule.tag&&e.tagName.toLowerCase()!=this._rule.tag||this._rule.id&&e.id!=this._rule.id)return!1;for(var h in this._rule.classes)if(!(h in c))return!1;for(var d in this._rule.attrs)if(h=e.getAttribute(d),null==h||!a.attrPredicates[this._rule.attrMatch[d]](h,this._rule.attrs[d]))return!1;return this._parent?
this._parent.matches(e.parentElement,k(e.parentElement)):!0};a.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.indexOf(b)},"$=":function(a,b){return a.lastIndexOf(b)+b.length==a.length},"~=":function(a,b){return-1<a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return a}();a.BlockRuleElem=g;var f=function(){function b(b){this.kind=b.Kind;this.selector=a.Selector.parse(b.Selector,
{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var c=function(a){return new g(a.parent?c(a.parent):null,a)};this.rules=c(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.BlockRule=f;var d=function(){function a(){this._rules=[];this.rawRules=[]}a.prototype.isBlocked=function(a){for(var b=k(a),h=0;h<this._rules.length;++h)if(this._rules[h].rules.matches(a,b))return this._rules[h].kind;
return null};a.prototype.addRule=function(a){this._rules.push(new f(a));this.rawRules.push(a)};a.prototype.mungeBlockedStyle=function(a,b){var h=a.getBoundingClientRect(),d=Math.floor(h.width),h=Math.floor(h.height);if("object"==a.tagName.toLowerCase())for(var f=a.children,n=0;n<f.length;n++){var g=f[n];if("embed"==g.tagName.toLowerCase()){f=g.getBoundingClientRect();d=Math.max(d,Math.floor(f.width));h=Math.max(h,Math.floor(f.height));break}}f="";null!=b&&(f=b.trim());0<f.length&&";"!=f.charAt(f.length-
1)&&(f+=";");if(0!=d||0!=h)f+="width:"+d+"px;height:"+h+"px;";return f};return a}();a.Blocker=d})(l||(l={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=
3;a.XHR_DONE=4})(l||(l={}));(function(a){function k(a){return"_fsblocked"in a}function g(a,b){a._fsblocked=b}function f(a){return a?a._fs:null}function d(a){return(a=f(a))?a.id:0}function b(a){if(a.parent&&(a.parent.child==a&&(a.parent.child=a.next),a.parent.lastChild==a&&(a.parent.lastChild=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),a.parent=a.prev=a.next=null,a.id=0,a.child))for(a=[a.child];0<a.length&&1E4>a.length;){var b=a.pop();b.id=0;b.next&&a.push(b.next);b.child&&a.push(b.child)}}
function e(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];b(e.name,e.value)}}a.isBlocked=k;a.blockKind=function(a){return a._fsblocked};a.setBlocked=g;a.mirrorFor=f;a.fsid=d;a.fsidIfNotBlocked=function(a){return k(a)?0:d(a)};a.removeMirror=b;var c=function(){function c(a){this._blocker=a;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.tokenizeNode=function(a,c,e,d){var h=this._curId;try{var g=f(a),k=f(c);c=[];var q=
this.tokeNode(e,c,d);q&&a&&(b(q),q.parent=g,k==g.child&&(g.child=q),q.next=k,null==k?(q.prev=g.lastChild,g.lastChild=q):q.prev=k.prev,null!=q.prev&&(q.prev.next=q),null!=q.next&&(q.next.prev=q));return c}catch(l){return this._curId=h,[]}};c.prototype.tokeNode=function(b,c,d){if("SCRIPT"==b.nodeName||b.nodeType==a.Node_COMMENT_NODE)return null;var h={id:this._curId++,node:b};b._fs=h;var f=b.nodeName;"http://www.w3.org/2000/svg"==b.namespaceURI&&(f="svg:"+f);c.push("<"+f);try{if(this.processBlockedElem(b,
c))return h;d&&d(b);e(b,function(a,b){c.push(":"+a);c.push(b)});if(b.firstChild){c.push("[");for(var f=null,g=b.firstChild;g;g=g.nextSibling){var k=this.tokeNode(g,c,d);k&&(k.parent=h,f?(f.next=k,k.prev=f):h.child=k,f=h.lastChild=k)}c.push("]")}b.nodeType==a.Node_TEXT_NODE&&c.push(b.textContent)}catch(q){}return h};c.prototype.processBlockedElem=function(b,c){var d=this;if(b.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var h=this._blocker.isBlocked(b);if(h){g(b,h);var f,k=!1;e(b,function(a,e){if("class"==
a)e+=" _fs_block_"+h,f=!0;else if("style"==a)e=d._blocker.mungeBlockedStyle(b,e),k=!0;else if("value"==a||"checked"==a||"src"==a)return;c.push(":"+a);c.push(e)});f||(c.push(":class"),c.push("_fs_block_"+h));k||(c.push(":style"),c.push(this._blocker.mungeBlockedStyle(b,"")));return!0}}return!1};return c}();a.NodeEncoder=c})(l||(l={}));(function(a){var k=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(f){function d(){e?1<m.length?c.push([e.idx,
m.length]):c.push(e.idx):c.push(m[0])}if(0==f.length)return[];for(var b=f[0],e=Object.prototype.hasOwnProperty.call(this.dict.map,b)?this.dict.map[b]:null,c=[],h,m=[b],b=1;b<f.length;b++)if(h=f[b],e&&Object.prototype.hasOwnProperty.call(e.map,h))m.push(h),e=e.map[h];else{d();var p=this.startIdx+b-m.length;null==e&&this.nodeCount<a.MAX_NODES&&(e={idx:p,map:{}},this.dict.map[m[m.length-1]]=e,this.nodeCount++);this.nodeCount<a.MAX_NODES&&(e.map[h]={idx:p,map:{}},this.nodeCount++);m=[h];e=Object.prototype.hasOwnProperty.call(this.dict.map,
h)?this.dict.map[h]:null}d();this.startIdx+=f.length;return c};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=k;k=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,b=0;b<a.length;++b){var e=a[b];switch(typeof e){case "string":this._seq.push(e);break;case "number":this._seq.push(this._seq[e]);break;case "object":for(var c=0;c<e[1];c++)this._seq.push(this._seq[e[0]+c])}}return d};return a}();a.LZJGWDecoder=k})(l||
(l={}));(function(a){var k=function(){function g(f,d,b,e){void 0===e&&(e=function(a,b){});this._ctx=f;this._blocker=d;this._wnd=b;this._visitor=e;this._sentDomSnapshot=!1;this._records=[];this._lz=new a.LZJGWEncoder;this._encoder=new a.NodeEncoder(d)}g.prototype.hookMutations=function(a){var d=this;void 0===a&&(a=this._wnd.document.documentElement);this._root=a;this._sentDomSnapshot=!1;this._observer=new window.MutationObserver(function(a){d._records=d._records.concat(a)});this._observer.observe(a,
{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};g.prototype._unhookMutations=function(){this._observer.disconnect()};g.prototype.processMutations=function(){if(!this._root)return[];var f=this._ctx.now(),d=[];this._sentDomSnapshot||(this.genInsert(f,d,null,this._root,null),this._sentDomSnapshot=!0);if(0==this._records.length)return d;var b={},e={};this.processRecords(f,d,e,b);for(var c in e){var h=c.split(":");d.push({Kind:a.EVENT_MUT_ATTR,When:f,
Args:[parseInt(h[0]),h[1],e[c]]})}for(c in b)d.push({Kind:a.EVENT_MUT_TEXT,When:f,Args:[parseInt(c),b[c]]});this._records=[];return d};g.prototype.processRecords=function(f,d,b,e){for(var c={},h={},m=0;m<this._records.length;++m)try{var p=this._records[m],n=a.fsid(p.target);if(n)switch(c[n]=p.target,p.type){case "childList":if(0<p.removedNodes.length)for(var g=0;g<p.removedNodes.length;++g){var k=a.mirrorFor(p.removedNodes[g]);k&&k.id&&k.parent==a.mirrorFor(p.target)&&k.next==a.mirrorFor(p.nextSibling)&&
this.genRemove(f,d,k)}n&&(h[n]=p.target);break;case "characterData":var l=p.target.textContent;p.oldValue!=l&&(a.isBlocked(p.target)||(e[n]=l));break;case "attributes":var s=p.attributeName;p.target.hasAttribute(s)?(l=p.target.getAttribute(s),p.oldValue!=l&&(l=this.rewriteAttr(p.target,s,l),null!==l&&(b[n+":"+s]=l))):b[n+":"+s]=null}}catch(q){}for(var v in h)b=h[v],(e=a.mirrorFor(b))&&e.id&&this.diff(f,d,b,e.child,b.firstChild);for(v in c)b=c[v],this.maybeAddPlaceholderResize(f,d,b)};g.prototype.diff=
function(f,d,b,e,c){for(var h=[];e&&c;){var m=a.mirrorFor(c);a.fsid(c)?e.id==m.id?(e=e.next,c=c.nextSibling):(h.push({remove:e}),e=e.next):(h.push({insert:[b,c,e.node]}),c=c.nextSibling)}for(;e;e=e.next)h.push({remove:e});for(;c;c=c.nextSibling)h.push({insert:[b,c,null]});for(b=0;b<h.length;b++)e=h[b],e.insert?this.genInsert(f,d,e.insert[0],e.insert[1],e.insert[2]):e.remove&&this.genRemove(f,d,e.remove)};g.prototype.maybeAddPlaceholderResize=function(f,d,b){try{for(;b&&!a.fsid(b);)b=b.parentNode;
if(b&&a.isBlocked(b)){var e=b.getBoundingClientRect(),c=Math.floor(e.width),h=Math.floor(e.height);d.push({When:f,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[a.fsid(b),c,h]})}}catch(m){}};g.prototype.genInsert=function(f,d,b,e,c){var h=this;if(b&&a.isBlocked(b))return null;var m=a.fsid(b)||-1,p=a.fsid(c)||-1;b=this._encoder.tokenizeNode(b,c,e,function(a){h._visitor(f,a)});0<b.length&&d.push({When:f,Kind:a.EVENT_MUT_INSERT,Args:[m,p,this._lz.encode(b)]})};g.prototype.genRemove=function(f,d,b){var e=b.id;a.removeMirror(b);
if(0<d.length&&(b=d[d.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(e);return}d.push({When:f,Kind:a.EVENT_MUT_REMOVE,Args:[e]})};g.prototype.rewriteAttr=function(f,d,b){switch(d){case "style":a.isBlocked(f)&&(b=this._blocker.mungeBlockedStyle(f,b));break;case "class":a.isBlocked(f)&&0>b.indexOf("_fs_block_")&&(f=a.blockKind(f),b+=" _fs_block_"+f);break;case "value":a.isBlocked(f)&&(b=null)}return b};return g}();a.MutationWatcher=k})(l||(l={}));(function(a){function k(a,c){var d=Object.getOwnPropertyDescriptor(a.prototype,
c);Object.defineProperty(a.prototype,c,{set:function(a){var c=this;setTimeout(function(){b(c)},0);return d.set.call(this,a)},get:function(){return d.get.call(this)}})}function g(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var f=function(){function e(c,e){var d=this;this._onchange=c;this._checkElem=e;this._fallback=!1;this._elems={};this._values={};b=function(b){var c=a.fsid(b);if(c&&(b=d._elems[c])){var e=g(b);e!=d._values[c]&&(d._onchange(b),
d._values[c]=e)}}}e.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(d||(k(HTMLInputElement,"value"),k(HTMLInputElement,"checked"),k(HTMLSelectElement,"value"),k(HTMLTextAreaElement,"value"),d=!0),a=!0):a=!1;a||(this._fallback=!0)};e.prototype.addInput=function(b){var e=a.fsid(b);this._elems[e]=b;this._values[e]=g(b);this._values[e]&&this._onchange(b)};e.prototype.invokeGlobalOnChange=function(a){b(a)};e.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],
delete this._values[a];else if(this._fallback){var b=this._elems[a],e=g(b);e!=this._values[a]&&(this._onchange(b),this._values[a]=e)}};e.prototype._usingFallback=function(){return this._fallback};e.prototype._trackingElem=function(a){return!!this._elems[a]};return e}();a.InputWatcher=f;var d=!1,b;a.valueOfInputishElem=g})(l||(l={}));(function(a){function k(a){(a=a.target.tagName)&&(a=a.toLowerCase());return a}function g(a,b){return a.tagName&&a.tagName.toLowerCase()in b?!0:a.parentNode?g(a.parentNode,
b):!1}var f=function(){function d(b,e,c,d,f){var p=this;this._ctx=b;this._queue=e;this._blocker=c;this._wnd=d;this._onFrameCreated=f;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._scrollTimeouts={};this._quirks=!1;this._doc=d.document;this._loc=d.location;this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._watcher=new a.InputWatcher(function(a){p.addChangeElem(a)},function(b){return!!a.fsid(b)});this._mutHandler=
new a.MutationWatcher(b,c,d,function(a,b){p.visitNode(a,b)})}d.prototype.onDomLoad=function(){var b=this;this.addDomLoaded();this.addResize();this._mutHandler.hookMutations();this._watcher.hookEvents();this.docElem().addEventListener("scroll",function(a){b.addScroll(a)},!0);this._wnd.addEventListener("mousemove",function(a){b.addMouseMove(a)},!0);this._wnd.addEventListener("mousedown",function(a){b.addMouseDown(a)},!0);this._wnd.addEventListener("mouseup",function(a){b.addMouseUp(a)},!0);this._wnd.addEventListener("keydown",
function(a){b.addKeyDown(a)},!0);this._wnd.addEventListener("keyup",function(a){b.addKeyUp(a)},!0);this._wnd.addEventListener("scroll",function(a){b.addWindowScroll()});this._wnd.addEventListener("resize",function(a){b.addResize()});this._wnd.addEventListener("submit",function(a){b.addFormSubmit(a)});this._wnd.addEventListener("click",function(a){b.addClick(a)},!0);this._wnd.addEventListener("dblclick",function(a){b.addDblClick(a)},!0);this._wnd.addEventListener("focus",function(a){b.addFocus(a)},
!0);this._wnd.addEventListener("blur",function(a){b.addBlur(a)},!0);this._wnd.addEventListener("change",function(a){b.addChange(a)},!0);this._wnd.addEventListener("touchstart",function(c){b.addTouchEvent(c,a.EVENT_TOUCHSTART);b.addWindowScroll()},!0);this._wnd.addEventListener("touchend",function(c){b.addTouchEvent(c,a.EVENT_TOUCHEND);b.addWindowScroll()},!0);this._wnd.addEventListener("touchmove",function(c){b.addTouchEvent(c,a.EVENT_TOUCHMOVE);b.addWindowScroll()},!0);this._wnd.addEventListener("touchcancel",
function(c){b.addTouchEvent(c,a.EVENT_TOUCHCANCEL)},!0);this._wnd.addEventListener("play",function(c){b.addPlayPauseEvent(c,a.EVENT_PLAY)},!0);this._wnd.addEventListener("pause",function(c){b.addPlayPauseEvent(c,a.EVENT_PAUSE)},!0);this._wnd.addEventListener("focus",function(a){b.addWindowFocus(a)},!1);this._wnd.addEventListener("blur",function(a){b.addWindowBlur(a)},!1);if(history.pushState){this._wnd.addEventListener("popstate",function(){b.addNavigate()});var e=this;this._oldPushState=history.pushState;
history.pushState=function(a,b,d){e._oldPushState.apply(this,arguments);e.addNavigate()};this._oldReplaceState=history.replaceState;history.replaceState=function(a,b,d){e._oldReplaceState.apply(this,arguments);e.addNavigate()}}};d.prototype._cleanupForTests=function(){this._mutHandler._unhookMutations();history.pushState=this._oldPushState;history.replaceState=this._oldReplaceState;this._oldReplaceState=this._oldPushState=null};d.prototype.onLoad=function(){this.addLoad()};d.prototype.bundleEvents=
function(){this._watcher.tick();this.addWindowInnerWidth();return this._mutHandler.processMutations()};d.prototype.docElem=function(){return this._doc.documentElement};d.prototype.visitNode=function(b,e){switch(e.nodeName){case "INPUT":case "TEXTAREA":case "SELECT":this._watcher.addInput(e);break;case "FRAME":case "IFRAME":this._onFrameCreated(e);break;case "VIDEO":case "AUDIO":e.paused||this.addPlayPauseEventById(a.fsid(e),a.EVENT_PLAY)}};d.prototype.addMouseMove=function(b){b=a.fsid(b.target)?[b.clientX,
b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,b)};d.prototype.addMouseDown=function(b){this._queue.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY]);!g(b.target,{button:!0,a:!0,input:!0})||"input"==k(b)&&"submit"!=b.target.type||this._queue.singSwanSong()};d.prototype.addMouseUp=function(b){this._queue.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])};d.prototype.addTouchEvent=function(a,e){if(void 0!==a.changedTouches)for(var c=0;c<a.changedTouches.length;++c){var d=
a.changedTouches[c];isNaN(parseInt(d.identifier))&&(d.identifier=0);this._queue.enqueue(e,[d.identifier,d.clientX,d.clientY])}};d.prototype.addPlayPauseEvent=function(b,e){var c=a.fsid(b.target);c&&this.addPlayPauseEventById(c,e)};d.prototype.addPlayPauseEventById=function(a,e){this._queue.enqueue(e,[a])};d.prototype.addWindowFocus=function(b){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};d.prototype.addWindowBlur=function(b){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};d.prototype.maybeAddValueChange=
function(){var a=this._doc.activeElement;a&&this._watcher.invokeGlobalOnChange(a)};d.prototype.addKeyDown=function(b){var e=this._doc.activeElement;if(!e||a.fsidIfNotBlocked(e))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,[b.keyCode]);switch(k(b)){case "button":13!=b.keyCode&&32!=b.keyCode||this._queue.singSwanSong();break;case "a":13==b.keyCode&&this._queue.singSwanSong();break;case "input":"submit"==b.target.type&&13==b.keyCode&&this._queue.singSwanSong()}};d.prototype.addKeyUp=
function(b){var e=this._doc.activeElement;if(!e||a.fsidIfNotBlocked(e))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[b.keyCode])};d.prototype.addWindowInnerWidth=function(){var b=this._wnd.innerWidth;b!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[b]),this._curInnerWidth=b)};d.prototype.doWorkInScrollTimeout=function(b,e){var c=this;b in this._scrollTimeouts||(this._scrollTimeouts[b]=e,setTimeout(function(){if(b in c._scrollTimeouts){var a=c._scrollTimeouts[b];delete c._scrollTimeouts[b];
a()}},a.ScrollSampleInterval))};d.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};d.prototype.addWindowScroll=function(){var b=this,e=a.fsid(this._doc.body);e&&this.doWorkInScrollTimeout(e,function(){var c,d;"pageXOffset"in b._wnd?(c=b._wnd.pageXOffset,d=b._wnd.pageYOffset):(c=b._doc.body.scrollLeft,d=b._doc.body.scrollTop);if(c!=b._curWindowScrollX||d!=b._curWindowScrollY)b._queue.enqueue(a.EVENT_SCROLL,
[e,c,d]),b._curWindowScrollX=c,b._curWindowScrollY=d;b.addWindowInnerWidth()})};d.prototype.addScroll=function(b){var e=this,c=b.target,d=a.fsid(c);d&&this.doWorkInScrollTimeout(d,function(){e._queue.enqueue(a.EVENT_SCROLL,[d,c.scrollLeft,c.scrollTop])})};d.prototype.addResize=function(){var b,e;this._quirks?(b=this._doc.body.clientWidth,e=this._doc.body.clientHeight):(b=this.docElem().clientWidth,e=this.docElem().clientHeight);if(b!=this._clientWidth||e!=this._clientHeight)this._clientWidth=b,this._clientHeight=
e,this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight])};d.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};d.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};d.prototype.addNavigate=function(){var b=this._loc.href;this._currentUrl!=b&&(this._currentUrl=b,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};d.prototype.addClick=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_CLICK,[b])};d.prototype.addDblClick=
function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[b])};d.prototype.addFormSubmit=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[b])};d.prototype.addFocus=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FOCUS,[b])};d.prototype.addBlur=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_BLUR,[b])};d.prototype.addChange=function(a){this._watcher.invokeGlobalOnChange(a.target)};d.prototype.addChangeElem=function(b){var e=a.fsidIfNotBlocked(b);
e&&this._queue.enqueue(a.EVENT_VALUECHANGE,[e,a.valueOfInputishElem(b)])};return d}();a.EventWatcher=f})(l||(l={}));(function(a){a.UID_COOKIE="fs_uid";a.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");var k=function(){function g(a,d,b){void 0===b&&(b=document);this._host=a;this._orgId=d;this._doc=b;this._cookie=null;this._cookies={}}g.prototype.initFromCookies=function(f,d){for(var b=this._doc.cookie.split(";"),e=0;e<b.length;e++){var c=b[e].replace(/^\s+|\s+$/g,
"").split("="),h=c[0];this._cookies[h]||(this._cookies[h]=c[1])}this._cookie=g.parseCookie(this._cookies[a.UID_COOKIE]);if(this._cookie.Host!=f||this._cookie.OrgId!=d)this._cookie={Host:f,OrgId:d,UserId:"",SessionId:"",AppKey:"",Poisoned:!1}};g.prototype.initFromParsedCookie=function(a){this._cookie=a};g.parseCookie=function(f){var d="",b="",e="",c="",h="",m=!1;if(f){var p=f.split("`");3>p.length?d=f:(e=p[0],c=p[1],d=p[2],5<=p.length&&(h=decodeURIComponent(p[3]),m="true"==p[4],0<=a.BAD_APP_IDS.indexOf(h)&&
(a.logIfDebug('ignoring invalid app key "'+h+'" from cookie.'),h="",m=!1)))}f=d.indexOf(":");-1!=f&&(b=d.slice(f+1),d=d.slice(0,f));return{Host:e,OrgId:c,UserId:d,SessionId:b,AppKey:h,Poisoned:m}};g.prototype.host=function(){return this._cookie.Host};g.prototype.orgId=function(){return this._cookie.OrgId};g.prototype.userId=function(){return this._cookie.UserId};g.prototype.sessionId=function(){return this._cookie.SessionId};g.prototype.appKey=function(){return this._cookie.AppKey};g.prototype.poisoned=
function(){return this._cookie.Poisoned};g.prototype.cookieData=function(){return this._cookie};g.prototype.cookies=function(){return this._cookies};g.prototype.setCookie=function(a,d){var b=a+"="+d,b=this._domain?b+("; domain=."+encodeURIComponent(this._domain)):b+"; domain=";this._doc.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};g.prototype.setIds=function(f,d,b){a.isLocalhost(f)&&(f="");this._domain=f;this._cookie.UserId=d;this._cookie.SessionId=b;this.write()};g.prototype.setAppId=
function(f){f&&(f=f.trim());if(!f)return this._cookie.Poisoned?(a.logIfDebug("blocking FS.setUserVars API call due to mismatched user ID"),[!1,void 0]):[!0,void 0];if(f){var d=f.toLowerCase();if(0<=a.BAD_APP_IDS.indexOf(d))return a.logIfDebug("blocking FS.identify API call; uid value ("+f+") is illegal"),[!1,"fsidentity"]}if(this._cookie.AppKey&&this._cookie.AppKey!=f)return a.logIfDebug("blocking FS.identify API call; existing uid ("+this._cookie.AppKey+") does not match provided uid ("+f+")"),this._cookie.Poisoned=
!0,this.write(),[!1,"newuid"];this._cookie.AppKey=f;this._cookie.Poisoned=!1;this.write();return[!0,void 0]};g.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`"+this._cookie.Poisoned);return a};g.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return g}();a.Identity=k})(l||(l={}));(function(a){function k(b,c){return a.stringify({__fs:[b,
c?c:""]})}function g(b){return a.isLocalhost(a.domainFromHost(b))?b:0==b.indexOf("www.")?"r."+b.slice(4):"r."+b}function f(b,c){var e=Math.min(a.BackoffMax,5E3*Math.pow(2,b));return c?e+0.25*Math.random()*e:e}function d(a){return 400<=a||202==a?!0:!1}function b(a,b,c,e,d,f,h){a="/rec/bundle?OrgId="+a+"&UserId="+b+"&SessionId="+c+"&PageId="+e+"&Seq="+d.Seq;f&&(a+="&PageStartTime="+f);h&&(a+="&DeltaT="+h);return a}var e=function(){function b(a,e){void 0===e&&(e=new c);this._wnd=a;this._messagePoster=
e}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=e;var c=function(){function b(){}b.prototype.postMessage=function(b,c,e){var d=a._fs_transport();d?d.send(c,a.stringify(e)):b.postMessage(k(c,e),"*")};return b}();a.PostMessagePoster=c;a.formatPostMessageData=
k;a.bundleHost=g;e=function(){function c(b,e,d,f,m,k,l){void 0===k&&(k=a.RealTicker);void 0===l&&(l=new h);this._ctx=b;this._protocol=d;this._identity=f;this._onShutdown=m;this._tickerFactory=k;this._poster=l;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._outgoingEventQueue=[];this._bundleQueue=[];this._bundleHost=g(e);this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,
f,this,k)}c.prototype.protocol=function(){return this._protocol};c.prototype.enqueueEvents=function(a){this._outgoingEventQueue=this._outgoingEventQueue.concat(a)};c.prototype.startPipeline=function(a){var b=this;this._pageId=a;this.enqueueAndSendBundle();this._uploadTicker.start(function(){b.enqueueAndSendBundle()})};c.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[]};c.prototype.flush=function(){this.maybeSendNextBundle()};c.prototype.singSwanSong=
function(){0<this._outgoingEventQueue.length&&this.enqueueNextBundle();if(0<this._bundleQueue.length||this._pendingBundle){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};c.prototype.sendSwanSongBundle=function(a,c,e,d,f,h,m,g,k){void 0===k&&(k=null);a=b(a,c,e,d,f,h,m);this.post(a,f,g,k)};c.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():
0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};c.prototype.enqueueNextBundle=function(){var a={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(a);this.maybeSendNextBundle()};c.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};c.prototype._sendPendingBundle=
function(){var b=this,c=this._ctx.wallTime();if(!(c<this._backoffTime)){var e=this._pendingBundle;this._pendingBundleFailed=!1;this._lastPostTime=this._lastBundleTime=c;this.sendBundle(e,function(c){a.logIfDebug("Sent bundle "+e.Seq+" with "+e.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(c){a.logIfDebug("Failed to send events.");d(c)?b._onShutdown():(b._pendingBundleFailed=!0,
b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))})}};c.prototype.sendBundle=function(a,c,e){void 0===e&&(e=null);var d=b(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a);this.post(d,a,c,e)};c.prototype.post=function(b,c,e,d){void 0===d&&(d=null);var f=null;null!=c&&(f=a.stringify(c),this._byteCount+=f.length,a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,f,e,d)};
return c}();a.HttpEventTransport=e;var h=function(){function b(){}b.prototype.post=function(b,c,e,d,f,h){void 0===h&&(h=null);c="//"+c+e;var m=new XMLHttpRequest;if("withCredentials"in m)m.onreadystatechange=function(){m.readyState==a.XHR_DONE&&(200==m.status?f(m.responseText):h(m.status))},m.open("POST",b+c,!0),m.withCredentials=!0,m.setRequestHeader("Content-Type","text/plain"),m.send(d);else{var g=new XDomainRequest;g.onload=function(){f(g.responseText)};g.onerror=function(){h("Not Found"==g.responseText?
404:500)};g.onprogress=function(){};g.open("POST",c);g.send(d)}};b.prototype.exponentialBackoffMs=function(a,b){return f(a,b)};return b}();a.XHRPoster=h;a.exponentialBackoffMs=f;a.isErrorFatal=d})(l||(l={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.UserInactivityTimeout=1E4;a.HeartbeatInitial=4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5})(l||(l={}));(function(a){var k=
function(){function a(d,b,e){this._ctx=d;this._q=b;this._valueIndices=e;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var e=this._evts.length;if(1>=e)return!1;for(var c=this._evts[0].When,f=this._evts[e-1].When,m=0;m<this._valueIndices.length;++m){var g=this._valueIndices[m],k=this._evts[0].Args[g],l=(this._evts[1].When-c)/(f-c),r=(this._evts[1].Args[g]-k)/l,u=this._evts[e-1].Args[g],l=(f-this._evts[e-2].When)/
(f-c);b.push(k,u,r,(u-this._evts[e-2].Args[g])/l)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),g=function(){function f(a){this._ctx=a;this._gotInitialScroll=!1}f.prototype.processQueue=function(d){if(0==d.length)return d;this._ctx.maybeAddInitialScroll();for(var b=this._ctx.now(),e=[],c=new k(this._ctx,e,[0,1]),f={},m={},g,n=0;n<d.length;++n){var l=d[n];switch(l.Kind){case a.EVENT_MOUSEMOVE:c.add(l);break;case a.EVENT_TOUCHMOVE:var r=
l.Args[0];r in f||(f[r]=new k(this._ctx,e,[1,2]));f[r].add(l);break;case a.EVENT_SCROLL:r=l.Args[0];r in m||(m[r]=new k(this._ctx,e,[1,2]));m[r].add(l);break;case a.EVENT_INNERWIDTH:g||(g=new k(this._ctx,e,[0]));g.add(l);break;default:e.push(l)}}c.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(d=c.evts(),c=d[d.length-1].Args,2<c.length&&c[2]&&d[0].Args.push(c[2]));for(r in m)d=parseInt(r),m[d].finish(a.EVENT_SCROLL_CURVE,[b,d]);for(r in f)d=parseInt(r),f[d].finish(a.EVENT_TOUCHMOVE_CURVE,[b,d]);g&&g.finish(a.EVENT_INNERWIDTH_CURVE,
[b]);return e};return f}();a.EventProcessor=g})(l||(l={}));(function(a){var k=function(){function g(f,d,b,e){void 0===e&&(e=a.RealTicker);this._ctx=f;this._identity=d;this._transport=b;this._tickerFactory=e;this._recover()}g.prototype.sing=function(f,d,b){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");f={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:f,Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:b};try{localStorage.singSwanSong=
a.stringify(f)}catch(e){}};g.prototype._recover=function(){try{if("singSwanSong"in localStorage){var f=localStorage.singSwanSong;delete localStorage.singSwanSong;var d=a.parseJson(f);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+d.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(d.OrgId,d.UserId,d.SessionId,d.PageId,d.PageStartTime,d.Bundles,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(b){a.logIfDebug("Error recovering swan-song: "+
b)}};g.prototype.sendSwanSongBundles=function(f,d,b,e,c,h,g,k){var n=this;void 0===k&&(k=0);var l=null;h.constructor===Array&&(0!==h.length&&void 0!==h[0])&&(1==h.length&&(l=this._ctx.wallTime()-g),this._transport.sendSwanSongBundle(f,d,b,e,h[0],c,l,function(k){a.logIfDebug("Sent "+h[0].Evts.length+" trailing events from last session as Seq "+h[0].Seq);h.shift();0<h.length?n.sendSwanSongBundles(f,d,b,e,c,h,g):a.logIfDebug("Done with prior page swan song")},function(l){a.isErrorFatal(l)?a.logIfDebug("Fatal error while sending events, giving up"):
(a.logIfDebug("Failed to send events from last session, will retry while on this page"),n._lastSwanSongRetryTicker=new n._tickerFactory(a.exponentialBackoffMs(k,!0)),n._lastSwanSongRetryTicker.oneShot(function(){n.sendSwanSongBundles(f,d,b,e,c,h,g,k+1)}))}))};return g}();a.SwanSong=k})(l||(l={}));(function(a){var k=function(){function a(d){this._interval=d;this._handle=-1}a.prototype.oneShot=function(a){setTimeout(a,this._interval)};a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,
this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}();a.RealTicker=k;var g=function(){function f(d,b,e,c){void 0===e&&(e=function(){return[]});void 0===c&&(c=k);this._ctx=d;this._transport=b;this._gatherExternalEvents=e;this._tickerFactory=c;this._recordingDisabled=!1;this._lastWhen=-1;this._lastUserAction=0;this._quiescent=!1;this._lastHeartbeat=0;this._heartbeatInterval=a.HeartbeatInitial;this._eventQueue=[];this._gotUnload=!1;
this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._processor=new a.EventProcessor(d)}f.prototype.startPipeline=function(a,b,e){var c=this;this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=b,this._parentIds=e,this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){c.processEvents()}),this._sampleCurvesTicker.start(function(){c.processEvents(!0)}),
this._transport.startPipeline(a))};f.prototype.enqueue=function(a,b){this.enqueueAt(this._ctx.now(),a,b)};f.prototype.enqueueAt=function(d,b,e){this._recordingDisabled||(d<=this._lastWhen&&(d=this._lastWhen+1),this._lastWhen=d,this._eventQueue.push({When:d,Kind:b,Args:e}),a.isUserActionEvent(b)&&(this._lastUserAction=d))};f.prototype.enqueueFirst=function(a,b){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:b}):this.enqueue(a,b)};f.prototype.disableRecording=
function(){this._recordingDisabled=!0;this.stopPipeline();this._ctx.disableConsole()};f.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this.singSwanSong())};f.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this.disableRecording()};f.prototype._flush=function(){this.processEvents();this._transport.flush()};f.prototype.prequeue=function(a,b){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:b})};f.prototype.appendToQueue=
function(a){this._eventQueue=this._eventQueue.concat(a)};f.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};f.prototype.rebaseIframe=function(a){for(var b=0,e=this._eventQueue.length;b<e;b++){var c=this._eventQueue[b],f=c.When+this._ctx.startTime()-a;0>f&&(f=0);c.When=f}};f.prototype.processEvents=function(d){if(this._pipelineStarted&&(this._ctx.now()-this._lastUserAction>a.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,
this._heartbeatInterval=a.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var b=this._eventQueue;this._eventQueue=[];b=this._processor.processQueue(b);d||(b=b.concat(this._gatherExternalEvents()));this.ensureFrameIds(b);0!=b.length&&this._transport.enqueueEvents(b)}};f.prototype.maybeSendHeartbeat=function(){var d=this._ctx.now();return d-this._lastHeartbeat>=this._heartbeatInterval?(this._lastHeartbeat=d,this._heartbeatInterval*=
2,this._heartbeatInterval>a.HeartbeatMax&&(this._heartbeatInterval=a.HeartbeatMax),this.enqueue(a.EVENT_HEARTBEAT,[]),!0):!1};f.prototype.ensureFrameIds=function(a){if(this._frameId)for(var b=this._parentIds,e=b&&0<b.length,c=0;c<a.length;++c){var f=a[c];f.FId||(f.FId=this._frameId);e&&!f.PIds&&(f.PIds=b)}};f.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return f}();
a.EventQueue=g})(l||(l={}));(function(a){var k=function(){function g(a,d){this._queue=a;this._wnd=d;this._overflow=this._enabled=!1;this._total=0}g.prototype.enable=function(){var f=this;f._enabled||(f._enabled=!0,this._wnd.console?(console.log&&console.log.apply&&(f._oldLog=console.log,console.log=a.$entry(function(){f.addLog("log",arguments);return f._oldLog.apply(this,arguments)})),console.info&&console.info.apply&&(f._oldInfo=console.info,console.info=a.$entry(function(){f.addLog("info",arguments);
return f._oldInfo.apply(this,arguments)})),console.warn&&console.warn.apply&&(f._oldWarn=console.warn,console.warn=a.$entry(function(){f.addLog("warn",arguments);return f._oldWarn.apply(this,arguments)})),console.error&&console.error.apply&&(f._oldError=console.error,console.error=a.$entry(function(){f.addLog("error",arguments);return f._oldError.apply(this,arguments)}))):f.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),f._oldOnError=this._wnd.onerror,this._wnd.onerror=function(a,
b,e){f.addError(a,b,e);if(f._oldOnError)return f._oldOnError.apply(this,arguments)})};g.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&(console.error=this._oldError),this._wnd.onerror=this._oldOnError)};g.prototype.addLog=function(f,d){if(this.checkOverflow()){for(var b=[f],e=0;e<d.length;++e)b.push(a.stringify(d[e],1E3));this._queue.enqueue(a.EVENT_LOG,
b)}};g.prototype.addError=function(f,d,b){this.checkOverflow()&&("object"==typeof f&&(f=a.stringify(f,1E3)),"object"==typeof d&&(d=a.stringify(d,100)),"object"==typeof b&&(b=-1),this._queue.enqueue(a.EVENT_ERROR,[f,d,b]))};g.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",g.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};g.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';
return g}();a.ConsoleWatcher=k})(l||(l={}));(function(a){var k=function(){function g(f,d){var b=this;this._queue=f;this._identity=d;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===
Date?a:new Date(a)):!1}};this._apiImpl=a.$entry(function(e,c){switch(e){case "account":if(b._identity.poisoned()){a.logIfDebug("blocking FS.identifyAccount API call due to mismatched user ID");break}b.setvar_api("acct",b.AccountSystemVars,c);break;case "user":var d=b._identity.setAppId(c.uid),f=d[1];if(!d[0]){switch(f){case "newuid":b._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["newuid",c.uid,b._identity.appKey()]);break;case "fsidentity":b._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["fsidentity",c.uid]);break;
case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+f)}break}b.setvar_api("user",b.UserSystemVars,c);break;default:a.logIfDebug('invalid operation "'+e+'"; only "account" and "user" are supported at present')}})}g.prototype.api=function(a,d){this._apiImpl(a,d)};g.prototype.processApiQueue=function(a){if(a)for(var d=0;d<a.length;d++)this.api(a[d][0],a[d][1])};g.prototype.setvar_api=function(f,d,b){var e={},c;for(c in b)if(b.hasOwnProperty(c)){var h=b[c];a.logIfDebug("set-var('"+
f+"'): \""+c+'" = '+a.stringify(h));var g=typeof h;if("object"!==g||h&&h.constructor==Date){var k,l;if(c in d)k=c,l=d[c];else{l=c.split("_");if(2!=l.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",f+":"+c]);continue}-1!=c.indexOf(" ")?(k=c.replace(/ /g,""),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",f+":"+c]),a.logIfDebug("Warning: variable '"+c+"' has spaces in it, which is disallowed. Converted name to '"+
k+"'.")):k=c;l=l[1]}l in this.VarTypes?this.VarTypes[l](h)?("str"==l&&(h=h.trim()),"date"==l&&(h=this.toIsoString(h)),e[k]=h):(a.logIfDebug("illegal value "+a.stringify(h)+" for type "+l),"number"===g?g=0==h-Math.floor(h)?"integer":"real":"object"==g&&(null!=h&&h.constructor==Date)&&(g=isNaN(h)?"invalid date":"date"),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["vartype",f+":"+c,g])):(a.logIfDebug('invalid type "'+l+'"'),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",f+":"+c]))}else h instanceof
Array&&(g="array"),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["vartype",f+":"+c,g+" (unsupported)"])}this._queue.enqueue(a.EVENT_SYS_SETVAR,[f,a.stringify(e)])};g.prototype.toIsoString=function(a){return(a.constructor===Date?a:new Date(a)).toISOString()};return g}();a.Vars=k})(l||(l={}));(function(a){function k(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function g(a){var b=a.src;return!a.hasAttribute("src")||"about:blank"==b||0==b.indexOf("javascript:")||0==b.indexOf(f)}
a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_DISABLE_RECORDING="DisableRecording";var f=location.protocol+"//"+location.host;a.defaultInjector=function(b,c,d,f){a.logIfDebug("Injecting into Frame ["+b.src+"]");try{if(b.src&&("about:blank"!=b.src&&0>b.src.indexOf("javascript:"))&&b.src!=b.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+b.src);else if(b.contentWindow[a.Namespace()])a.logIfDebug("FS already defined in Frame contentWindow: "+
b.src+". Ignoring.");else{var g=b.contentWindow,k=b.contentDocument;g._fs_org=c;g._fs_host=d;g._fs_debug=a.isDebug();g._fs_run_in_iframe=!0;var l=k.createElement("script");l.async=!0;l.src=f+"//"+d+"/s/fs.js";k.head.appendChild(l)}}catch(r){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var d=a.GetCurrentSessionEnabledState,
b=function(){function b(c,d,e,f,g,k,l,u){var s=this;this._ctx=c;this._host=d;this._protocol=e;this._orgId=f;this._wnd=g;this._injector=u;this._iFrames=[];this._pendingChildFrameIdInits=[];this._blocker=new a.Blocker;this._identity=new a.Identity(d,f,this._wnd.document);this._transport=l(g,c,d,e,this._identity,function(){s.disableRecording()});this._queue=new a.EventQueue(c,this._transport,function(){return s._eventWatcher.bundleEvents()},k);this._eventWatcher=new a.EventWatcher(c,this._queue,this._blocker,
g,function(a){s.onFrameCreated(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,g)}b.prototype.start=function(){var b=this;this._blocker.addRule({Selector:"object",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"embed",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"canvas",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});this._blocker.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});this._consoleWatcher.enable();this._wnd.addEventListener("beforeunload",
function(a){b._queue.addUnload()});this._wnd.addEventListener("unload",function(a){b._queue.addUnload()})};b.prototype.getCurrentSessionEnabled=function(){return d.Disabled};b.prototype.identity=function(){return this._identity};b.prototype.vars=function(){return null};b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};b.prototype.onLoad=function(){this._eventWatcher.onLoad()};
b.prototype.disableRecording=function(){this._queue.disableRecording();this.tellIframesToDisableRecording()};b.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var d=a.fsid(b);d?(this._listeningToInnerFrames||(this.listenToInnerFrames(),this._listeningToInnerFrames=!0),this.setupIFrame(d,b)):
a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.setupIFrame=function(b,d){var e=this;this._iFrames.push(d);g(d)?(a.logIfDebug("Attempting to setup Frame ["+d.src+"]"),this._injector(d,this._orgId,this._host,this._protocol),d.addEventListener("load",function(b){a.logIfDebug("onload for frame ["+d.src+"]");e._injector(d,e._orgId,e._host,e._protocol)})):(a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+d.src+"]"),d.contentWindow.postMessage&&(a.logIfDebug("Eagerly sending FrameId "+
b+" to Frame ["+d.src+"]"),this.sendFrameIdToInnerFrame(d.contentWindow,b)))};b.prototype.tellIframesToDisableRecording=function(){for(var b=0;b<this._iFrames.length;b++){var d=this._iFrames[b];d.contentWindow&&d.contentWindow.postMessage&&d.contentWindow.postMessage(a.stringify({__fs:[a.FS_DISABLE_RECORDING]}),"*")}};b.prototype.listenToInnerFrames=function(){var b=this;this._wnd.addEventListener("message",function(d){if("string"==typeof d.data){var e=k(d.data);if(e[0]==a.FS_IFRAME_EVENTS)d=e[1],
0<d.length&&b._transport.enqueueEvents(d);else{var f=b.iFrameWndToFsId(d.source);e[0]==a.FS_REQUEST_FRAME_ID?d.source&&f?(a.logIfDebug("Responding to FID request for frame "+f),b.sendFrameIdToInnerFrame(d.source,f)):a.logIfDebug("No FrameId found. Hoping to send one later."):a.logIfDebug("Invalid _fs postmessage command: "+e[0]+" sent from child FrameId: "+f)}}})};b.prototype.sendFrameIdToInnerFrame=function(b,d){var e=this,f=function(){var f=[];0!=e._frameId&&(f=e._parentIds?e._parentIds.concat(e._frameId):
[e._frameId]);b.postMessage(a.stringify({__fs:[a.FS_SET_FRAME_ID_CMD,d,f,e._ctx.startTime(),e._blocker.rawRules,e._identity.cookieData(),e._pageId]}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(f):f()};b.prototype.iFrameWndToFsId=function(b){for(var d=0;d<this._iFrames.length;d++)if(this._iFrames[d].contentWindow==b)return a.fsid(this._iFrames[d]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.Recorder=b;a.parsePostMessageData=k})(l||(l={}));var w=this&&
this.__extends||function(a,k){function g(){this.constructor=a}for(var f in k)k.hasOwnProperty(f)&&(a[f]=k[f]);a.prototype=null===k?Object.create(k):(g.prototype=k.prototype,new g)};(function(a){function k(f,d,b,e,c,g){return new a.HttpEventTransport(d,b,e,c,g)}var g=function(f){function d(b,d,c,g,l,p,n,t,r){var u=this;void 0===l&&(l=window);void 0===p&&(p=a.RealTicker);void 0===n&&(n=new a.XHRPoster);void 0===t&&(t=k);void 0===r&&(r=a.defaultInjector);f.call(this,b,d,c,g,l,p,t,r);this._poster=n;this._domLoaded=
!1;this._doc=this._wnd.document;this._vars=new a.Vars(this._queue,this._identity);this._frameId=0;this._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(function(a){u._queue.shutdown();a&&(a=u._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",u._embedToken)})}w(d,f);d.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};d.prototype.vars=function(){return this._vars};d.prototype.onDomLoad=function(){f.prototype.onDomLoad.call(this);
this._domLoaded=!0;this.injectIntegrationScript()};d.prototype.start=function(){var b=this;f.prototype.start.call(this);this._identity.initFromCookies(this._host,this._orgId);var d=window[a.Namespace()];d&&"q"in d&&(this._vars.processApiQueue(d.q),delete window[a.Namespace()].q);var c=this._doc.documentElement,g=a._fs_hash(),d=a._fs_replay_flags(),c={OrgId:this._identity.orgId(),UserId:this._identity.userId(),Url:location.href,Base:a.baseUri(this._doc),Width:c.clientWidth,Height:c.clientHeight,ScreenWidth:this._wnd.screen.width,
ScreenHeight:this._wnd.screen.height,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),Hash:g};d&&(c.ReplayFlags=d);this._poster.post(this._protocol,this._host,"/rec/page",a.stringify(c),function(c){var d;try{d=a.parseJson(c)}catch(e){b.disableBecauseRecPageSaidSo();return}b.handleResponse(d);if(c=a._fs_ready())try{c()}catch(f){a.logIfDebug("exception in _fs_ready(): "+f)}for(c=0;c<d.Blocks.length;++c)try{a.BlockRule.isComment(d.Blocks[c].Selector)||b._blocker.addRule(d.Blocks[c])}catch(g){a.logIfDebug("Unexpected error parsing block rule. Skipping "+
d.Blocks[c])}b._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(b._doc),a.doctypeString(b._doc)]);b._queue.startPipeline(d.PageIntId)},function(a){b.disableBecauseRecPageSaidSo()})};d.prototype.setIdsAndCookie=function(b){var d=this._identity;d.setIds(b.CookieDomain,b.UserIntId,b.SessionIntId);this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+d.userId()+"/Session,"+d.sessionId()+"/Page,"+b.PageIntId)};d.prototype.injectIntegrationScript=function(){if(this._domLoaded&&
this._integrationScript){var a=this._doc.createElement("script");a.text=this._integrationScript;a.async=!0;this._doc.head.appendChild(a)}};d.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;this.injectIntegrationScript()};d.prototype.disableBecauseRecPageSaidSo=function(){this.disableRecording();a.logIfDebug("Disabling FS.");
var b=a._fs_ready();if(b)try{b(!0)}catch(d){a.logIfDebug("exception in _fs_ready(): "+d)}};return d}(a.Recorder);a.TopRecorder=g})(l||(l={}));(function(a){function k(f,d,b,e,c,g){return new a.PostMessageEventTransport(f)}a.makeFrameTransport=k;var g=function(f){function d(b,d,c,g,l,p,n,t,r){void 0===l&&(l=window);void 0===p&&(p=a.RealTicker);void 0===n&&(n=new a.PostMessagePoster);void 0===t&&(t=k);void 0===r&&(r=a.defaultInjector);f.call(this,b,d,c,g,l,p,t,r);this._messagePoster=n}w(d,f);d.prototype.start=
function(){f.prototype.start.call(this);this.waitForOuterScript()};d.prototype.waitForOuterScript=function(){var b=this;this._wnd.addEventListener("message",function(d){if("string"==typeof d.data){var c=a.parsePostMessageData(d.data);if(c[0]==a.FS_SET_FRAME_ID_CMD)try{b.setFrameIdFromOutside(c[1],c[2],c[3],c[4],c[5],c[6])}catch(f){a.logIfDebug("Failed to parse frameId from message"+d.data)}else c[0]==a.FS_DISABLE_RECORDING?b.disableRecording():d.source==parent&&a.logIfDebug("Invalid _fs postmessage command: "+
c[0])}});this.sendRequestForFrameId()};d.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,null)))};d.prototype.setFrameIdFromOutside=function(b,d,c,f,g,k){if(b)if(this._frameId)a.logIfDebug("frame Id is already set to "+this._frameId+". Received second request to set it to "+
b+" Iframe:"+location.href);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._identity.initFromParsedCookie(g);this._frameId=b;this._parentIds=d;for(g=0;g<f.length;++g)this._blocker.addRule(f[g]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(c);this._ctx.setStartTime(c);this._pageId=k;this._queue.startPipeline(k,b,d);this.flushPendingChildFrameInits()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+
location.href)};return d}(a.Recorder);a.InnerRecorder=g})(l||(l={}));(function(a){function k(){return(new Date).getTime()}function g(b){var c=v.getCurrentSessionEnabled();if(c==a.GetCurrentSessionEnabledState.NoInfoYet)return null;if(c==a.GetCurrentSessionEnabledState.Disabled)return r+"//"+v.identity().host()+"/opt/upgrade";c=f();if(!c)return null;b&&(c+=":"+k());return r+"//"+v.identity().host()+"/ui/"+v.identity().orgId()+"/session/"+encodeURIComponent(c)}function f(){var b=v.getCurrentSessionEnabled();
return b!=a.GetCurrentSessionEnabledState.NoInfoYet&&b!=a.GetCurrentSessionEnabledState.Disabled&&v.identity().userId()?v.identity().userId()+":"+v.identity().sessionId():null}function d(){v.console().enable()}function b(){v.console().disable()}function e(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];"log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(b.unshift(a),a="log");v.console().addLog(a,b)}function c(b,c){var d=v.vars();d?d.api(b,c):a.logIfDebug("Illegal attempt to set "+
b+" vars in an frame context: "+a.stringify(c))}function h(){return v.identity().cookies()}function l(a,b){return v.identity().setCookie(a,b)}function p(){var b=this,c=document.documentElement,d=a._fs_hash(),e=a._fs_replay_flags();a.logIfDebug("Unable to record playback stream.");var f=document.createElement("script");window.__fs_startResponse=function(a){b.handleResponse(a);document.body.removeChild(f)};f.src="//"+this._identity.host()+"/rec/page?OrgId="+this._identity.orgId()+"&UserId="+this._identity.userId()+
"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+c.clientWidth+"&Height="+c.clientHeight+"&ScreenWidth="+window.screen.width+"&ScreenHeight="+window.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&Fallback=true"+(e?"&ReplayFlags="+e:"")+(d?"&Hash="+d:"");document.body.appendChild(f)}function n(){var a=function(){s||(s=!0,v.onDomLoad())},b=!1;switch(document.readyState){case "interactive":document.attachEvent||
a();break;case "complete":a(),b||(b=!0,v.onLoad())}s||document.addEventListener("DOMContentLoaded",function(b){a()});b||window.addEventListener("load",function(c){a();b||(b=!0,v.onLoad())})}var t,r="https:",u,s=!1,q=k(),v,w=!1,x={startTime:function(){return q},setStartTime:function(a){q=a},now:function(){return k()-q},wallTime:k,disableConsole:b,maybeAddInitialScroll:function(){!w&&(document.body&&a.fsid(document.body))&&(v.eventWatcher().addWindowScroll(),w=!0)}};a.Setup=function(){if(!a.isLoaded()){var s=
a.Namespace();a.setLoaded(s);window[s].getCurrentSessionURL=a.$entry(g);window[s].getCurrentSession=a.$entry(f);window[s].enableConsole=a.$entry(d);window[s].disableConsole=a.$entry(b);window[s].log=a.$entry(e);window[s]._api=a.$entry(c);window[s]._cookies=h;window[s]._setCookie=l;a.initDebug();t=a._fs_host();s=a._fs_org();if(t)if(s){a.logIfDebug("host: "+t);a.logIfDebug("orgid: "+s);"localhost:8080"==t&&(r="http:");var w;w=a._fs_transport();a._fs_is_outer_script()?u=!1:window!=top?u=!0:w?w.init&&
w.init(s)&&(u=!0):u=!1;window.MutationEvent&&window.postMessage?!u||a._fs_run_in_iframe()||a._fs_transport()?w=!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),w=!1):(a.logIfDebug("missing required browser features"),w=!1);w?(q=k(),v=u?new a.InnerRecorder(x,t,r,s):new a.TopRecorder(x,t,r,s),v.start(),n()):p()}else a.logIfDebug("Missing global _fs_org. Recording disabled.");else a.logIfDebug("Missing global _fs_host. Recording disabled.")}};a.getCurrentSessionURL=
g})(l||(l={}));try{l.Setup()}catch(x){l._fs_debug()&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
